Version 4
SHEET 1 1576 2036
WIRE 64 176 -192 176
WIRE 752 176 160 176
WIRE 880 176 752 176
WIRE 1104 176 960 176
WIRE 1488 176 1104 176
WIRE -192 224 -192 176
WIRE -192 224 -240 224
WIRE -192 256 -192 224
WIRE 1488 304 1488 176
WIRE 752 320 752 176
WIRE 1104 320 1104 176
WIRE 1488 528 1488 384
WIRE 1488 528 1376 528
WIRE 1104 576 1104 384
WIRE 1488 576 1488 528
WIRE 752 640 752 384
WIRE -1632 752 -1664 752
WIRE -1408 752 -1552 752
WIRE -1200 752 -1408 752
WIRE -1040 752 -1120 752
WIRE -976 752 -1040 752
WIRE -768 752 -896 752
WIRE -576 752 -768 752
WIRE 1488 768 1488 656
WIRE -1664 800 -1664 752
WIRE -240 800 -240 224
WIRE -240 800 -688 800
WIRE 752 800 -240 800
WIRE -768 832 -768 752
WIRE -1040 848 -1040 752
WIRE 752 848 752 800
WIRE 880 864 784 864
WIRE 608 880 -48 880
WIRE 720 880 608 880
WIRE 1376 896 1376 528
WIRE 1376 896 784 896
WIRE -240 960 -240 800
WIRE -576 976 -576 752
WIRE -272 976 -576 976
WIRE -1040 992 -1040 912
WIRE -768 992 -768 896
WIRE 64 992 -208 992
WIRE -272 1008 -336 1008
WIRE 608 1008 608 880
WIRE 880 1008 880 864
WIRE 880 1008 736 1008
WIRE 144 1072 144 224
WIRE 512 1072 144 1072
WIRE -336 1104 -336 1008
WIRE -48 1104 -48 880
WIRE -48 1104 -336 1104
WIRE 608 1136 608 1088
WIRE 736 1136 736 1008
WIRE 736 1136 608 1136
WIRE 784 1136 736 1136
WIRE 1008 1136 864 1136
WIRE 64 1168 64 992
WIRE 64 1168 -96 1168
WIRE 1008 1184 1008 1136
WIRE -688 1344 -688 800
WIRE -560 1344 -688 1344
WIRE -544 1344 -560 1344
WIRE -400 1344 -496 1344
WIRE -320 1344 -400 1344
WIRE -192 1344 -256 1344
WIRE 16 1344 -192 1344
WIRE 352 1344 16 1344
WIRE -400 1408 -400 1344
WIRE -192 1408 -192 1344
WIRE -192 1424 -192 1408
WIRE 16 1504 16 1344
WIRE -1408 1536 -1408 752
WIRE -400 1536 -400 1472
WIRE -400 1536 -1408 1536
WIRE 352 1584 352 1344
WIRE -96 1600 -96 1168
WIRE -96 1600 -256 1600
WIRE 288 1632 240 1632
WIRE 16 1728 16 1584
WIRE 240 1728 240 1632
WIRE 240 1728 16 1728
WIRE 352 1728 352 1680
WIRE 512 1728 512 1072
WIRE 512 1728 352 1728
WIRE 352 1760 352 1728
WIRE 16 1776 16 1728
WIRE 240 1808 240 1728
WIRE 288 1808 240 1808
WIRE -256 1824 -256 1600
WIRE -176 1824 -256 1824
WIRE -48 1824 -96 1824
WIRE 16 1904 16 1872
WIRE 352 1936 352 1856
FLAG -192 336 0
FLAG 752 640 0
FLAG -1664 800 0
FLAG -1040 992 0
FLAG -768 992 0
FLAG 1488 768 0
FLAG 1104 576 0
FLAG 752 912 0
FLAG 1008 1184 0
FLAG -240 1024 0
FLAG -192 1472 0
FLAG 352 1936 0
FLAG 16 1904 0
SYMBOL voltage -192 240 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 10
SYMBOL nmos 64 224 R270
SYMATTR InstName M1
SYMATTR Value IRFHM831
SYMBOL ind 864 192 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L1
SYMATTR Value 350µ
SYMBOL cap 1088 320 R0
SYMATTR InstName C1
SYMATTR Value 1µ
SYMBOL res 1472 288 R0
SYMATTR InstName Rload
SYMATTR Value 10
SYMBOL voltage -1536 752 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 32 56 VTop 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value PULSE(0 10 0 1p 1p 10u 20u)
SYMBOL schottky 768 384 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D1
SYMBOL res -1104 736 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 1k
SYMBOL res -880 736 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 1k
SYMBOL cap -1056 848 R0
SYMATTR InstName C2
SYMATTR Value 1n
SYMBOL cap -784 832 R0
SYMATTR InstName C3
SYMATTR Value 1n
SYMBOL res 1472 560 R0
SYMATTR InstName Rs
SYMATTR Value 0.1
SYMBOL OpAmps\\UniversalOpamp2 752 880 M0
SYMATTR InstName ErrorAmp
SYMBOL res 592 992 R0
SYMATTR InstName R1
SYMATTR Value 150k
SYMBOL res 880 1120 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 1k
SYMBOL OpAmps\\UniversalOpamp2 -240 992 R0
SYMATTR InstName U1
SYMBOL diode -560 1360 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D2
SYMBOL cap -416 1408 R0
SYMATTR InstName C4
SYMATTR Value 1µ
SYMBOL cap -208 1408 R0
SYMATTR InstName C5
SYMATTR Value 1µ
SYMBOL diode -320 1360 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D3
SYMBOL pnp 288 1856 M180
SYMATTR InstName Q1
SYMATTR Value BC557B
SYMBOL npn 288 1584 R0
SYMATTR InstName Q2
SYMATTR Value BC547C
SYMBOL npn -48 1776 R0
SYMATTR InstName Q3
SYMATTR Value BC547C
SYMBOL res -80 1808 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 10k
SYMBOL res 0 1488 R0
SYMATTR InstName R6
SYMATTR Value 1.2k
TEXT -1768 824 Left 2 !.tran 0 1ms 0 0.01m
TEXT -1856 664 Left 2 ;50kHz 555 Square oscillator
TEXT -888 696 Left 2 ;RC Filter triangle wave
TEXT -664 1280 Left 2 ;Charge pump - double voltage to drive High side NFET
TEXT 392 1752 Left 2 ;Push/Pull gate drive
TEXT 776 824 Left 2 ;Error amplifier
TEXT -304 928 Left 2 ;PWM Modulator
TEXT -248 -192 Left 5 ;DC-DC Buck Converter (Constant current)
